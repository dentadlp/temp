<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manual Install &mdash; Netmaker 0.24.3 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/fonts.css" type="text/css" />
      <link rel="stylesheet" href="_static/netmaker-custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Netclient" href="netclient.html" />
    <link rel="prev" title="Install" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="getting-started.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Manual Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#important-notes">Important Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">0. Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#server">Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#domain">Domain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#prepare-dns">1. Prepare DNS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-dependencies">2. Install Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#open-firewall">3. Open Firewall</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prepare-mq">4. Prepare MQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-netmaker">5. Install Netmaker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prepare-docker-compose">Prepare Docker Compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extra-steps-for-pro">Extra Steps for Pro</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integrating-oauth">Integrating OAuth</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#start-netmaker">6. Start Netmaker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="netclient.html">Netclient</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced-client-install.html">Advanced Client Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="server-installation.html">Advanced Server Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#create-a-network">Create a Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#create-a-key">Create a Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#deploy-nodes">Deploy Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#manage-nodes-hosts">Manage Nodes/Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#uninstalling-the-netclient">Uninstalling the netclient</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#uninstalling-netmaker">Uninstalling Netmaker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="pro/index.html">Netmaker Professional</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrades.html">Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-guides.html">How-to-Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="conduct.html">Code of Conduct</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Netmaker</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="getting-started.html">Getting Started</a></li>
      <li class="breadcrumb-item active">Manual Install</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="manual-install">
<h1>Manual Install<a class="headerlink" href="#manual-install" title="Permalink to this headline"></a></h1>
<section id="important-notes">
<h2>Important Notes<a class="headerlink" href="#important-notes" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p><strong>WE RECOMMEND USING THE NM-QUICK SCRIPT INSTEAD OF THIS GUIDE. Our docker-compose files have changed sizeably and the install script now uses a different process to obtain certificates. The script can be found</strong> <a class="reference external" href="https://github.com/gravitl/netmaker#get-started-in-5-minutes">on GitHub</a> <strong>(raw script</strong> <a class="reference external" href="https://raw.githubusercontent.com/gravitl/netmaker/master/scripts/nm-quick.sh">here</a> <strong>). If you would like to install netmaker manually, You can use the instructions below.</strong></p></li>
<li><p>Due to the high volume of installations, the auto-generated domain has been rate-limited by the certificate provider. For this reason, we <strong>strongly recommend</strong> using your own domain. Using the auto-generated domain may lead to a failed installation due to rate limiting.</p></li>
<li><p>This guide is just a manual version of the steps performed by that script, and is therefore more prone to error.</p></li>
<li><p>You must decide if you are installing the Pro version of Netmaker or the Community version. We recommend Pro because of its substantial free limits, but it does require <a class="reference external" href="https://app.netmaker.io">an account</a>.</p></li>
<li><p>If deploying to DigitalOcean, you should use the <a class="reference external" href="https://marketplace.digitalocean.com/apps/netmaker">DigitalOcean 1-Click</a>, which uses the interactive script.</p></li>
<li><p>This instance will not be HA. However, it should comfortably handle 100+ concurrent clients and support the most common use cases.</p></li>
<li><p>For information about deploying more advanced configurations, see the <a class="reference internal" href="server-installation.html"><span class="doc">Advanced Installation</span></a> docs.</p></li>
</ol>
</section>
<section id="prerequisites">
<h2>0. Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline"></a></h2>
<section id="server">
<h3>Server<a class="headerlink" href="#server" title="Permalink to this headline"></a></h3>
<p>All components of Netmaker can be run on a single server (Virtual Machine or Bare Metal). Here some recommendations for setting up the server:</p>
<ul class="simple">
<li><p>We <strong>highly recommend</strong> that Netmaker be deployed in a dedicated networking environment.</p></li>
<li><p>The machine should have a public, static IP address</p></li>
<li><p>The machine should have at least 1GB RAM and 1 CPU (2GB RAM preferred for production installs)</p></li>
<li><p>2GB+ of storage</p></li>
<li><p>Ubuntu 21.04 Installed</p></li>
</ul>
<p>If you do not have a host for this server, here are some recommendations:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://marketplace.digitalocean.com/apps/netmaker">DigitalOcean (preferred)</a></p></li>
<li><p><a class="reference external" href="https://www.linode.com">Linode</a></p></li>
<li><p><a class="reference external" href="https://www.keepsec.ca">KeepSec</a></p></li>
<li><p><a class="reference external" href="https://aws.amazon.com">AWS</a></p></li>
<li><p><a class="reference external" href="https://azure.microsoft.com">Azure</a></p></li>
<li><p><a class="reference external" href="https://cloud.google.com">GCP</a></p></li>
<li><p>We <strong>do not</strong> recommend Oracle Cloud. There are known issues with their network configuration.</p></li>
</ul>
</section>
<section id="domain">
<h3>Domain<a class="headerlink" href="#domain" title="Permalink to this headline"></a></h3>
<p>Your server will host several services (netmaker server, UI, etc.) each of which requires a dedicated, public subdomain. Here are some recommendations:</p>
<ul class="simple">
<li><p>Use a publicly owned domain (e.x. example.com, mysite.biz)</p></li>
<li><p>Designate a subdomain (e.g. netmaker.example.com) for netmaker’s services (e.g. dashboard.netmaker.example.com)</p></li>
<li><p>Make sure you have permission and access to modify DNS records for your domain (e.x: Route53)</p></li>
<li><p><strong>Note on Cloudflare:</strong> Many of our users use Cloudflare for DNS. Cloudflare has limitations on subdomains you must be aware of, which can cause issues once Netmaker is deployed. Cloudflare will also proxy connections, which MQ does not like. This can be disabled in the Cloudflare dashboard. If setting up your Netmaker server using Cloudflare for DNS, be aware that the configuration of Cloudflare may cause problems with Netmaker which must be resolved, and at this point, Netmaker is not providing guidance on this setup.</p></li>
</ul>
</section>
</section>
<section id="prepare-dns">
<h2>1. Prepare DNS<a class="headerlink" href="#prepare-dns" title="Permalink to this headline"></a></h2>
<p>Create a wildcard A record pointing to the public IP of your VM. As an example, *.netmaker.example.com. Alternatively, create records for these specific subdomains:</p>
<ul class="simple">
<li><p>dashboard.domain</p></li>
<li><p>api.domain</p></li>
<li><p>broker.domain</p></li>
</ul>
<p>If deploying Pro, you will also need records for the following:IsStatic</p>
<ul class="simple">
<li><p>grafana.domain</p></li>
<li><p>prometheus.domain</p></li>
<li><p>netmaker-exporter.domain</p></li>
</ul>
</section>
<section id="install-dependencies">
<h2>2. Install Dependencies<a class="headerlink" href="#install-dependencies" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">root</span><span class="nd">@your</span><span class="o">-</span><span class="n">host</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">docker</span><span class="o">.</span><span class="n">io</span> <span class="n">docker</span><span class="o">-</span><span class="n">compose</span>
</pre></div>
</div>
<p>At this point you should have all the system dependencies you need.</p>
</section>
<section id="open-firewall">
<h2>3. Open Firewall<a class="headerlink" href="#open-firewall" title="Permalink to this headline"></a></h2>
<p>Make sure firewall settings are set for Netmaker both on the VM and with your cloud security groups (AWS, GCP, etc).</p>
<p>Make sure the following ports are open both on the VM and in the cloud security groups:</p>
<ul class="simple">
<li><p><strong>443, 80 (tcp):</strong> for Caddy, which proxies the Dashboard (UI), REST API (Netmaker Server), and Broker (MQTT)</p></li>
<li><p><strong>51821-518XX (udp):</strong> for WireGuard - Netmaker needs one port per network, starting with 51821, so open up a range depending on the number of networks you plan on having. For instance, 51821-51830.</p></li>
<li><p><strong>8085 (exporter Pro):</strong> If you are building a Pro server, you need this port open.</p></li>
<li><p><strong>1883, 8883 8083, 18083 (if using EMQX):</strong> We use two different types of brokers. There is Mosquitto or EMQX. if you are setting up EMQX, these four need to be open for MQTT, SSL MQTT, web sockets, and the EMQX dashbaord/REST api.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="n">proto</span> <span class="n">tcp</span> <span class="kn">from</span> <span class="nn">any</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">port</span> <span class="mi">443</span>
<span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="n">proto</span> <span class="n">tcp</span> <span class="kn">from</span> <span class="nn">any</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">port</span> <span class="mi">80</span>
<span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="n">proto</span> <span class="n">tcp</span> <span class="kn">from</span> <span class="nn">any</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">port</span> <span class="mi">3479</span>
<span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="n">proto</span> <span class="n">tcp</span> <span class="kn">from</span> <span class="nn">any</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">port</span> <span class="mi">8089</span>
<span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="mi">51821</span><span class="p">:</span><span class="mi">51830</span><span class="o">/</span><span class="n">udp</span>
</pre></div>
</div>
<p>It is also important to make sure the server does not block forwarding traffic (it will do this by default on some providers). To ensure traffic will be forwarded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iptables</span> <span class="o">--</span><span class="n">policy</span> <span class="n">FORWARD</span> <span class="n">ACCEPT</span>
</pre></div>
</div>
<dl class="simple">
<dt><strong>Again, based on your cloud provider, you may additionally need to set inbound security rules for your server (for instance, on AWS). This will be dependent on your cloud provider. Be sure to check before moving on:</strong></dt><dd><ul class="simple">
<li><p>allow 443/tcp from all</p></li>
<li><p>allow 80/tcp from all</p></li>
<li><p>allow 3479/tcp from all</p></li>
<li><p>allow 8089/tcp from all</p></li>
<li><p>allow 51821-51830/udp from all</p></li>
</ul>
</dd>
</dl>
</section>
<section id="prepare-mq">
<h2>4. Prepare MQ<a class="headerlink" href="#prepare-mq" title="Permalink to this headline"></a></h2>
<p>You must retrieve the MQ configuration file for Mosquitto and the wait script.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">O</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">.</span><span class="n">conf</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gravitl</span><span class="o">/</span><span class="n">netmaker</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">.</span><span class="n">conf</span>
<span class="n">wget</span> <span class="o">-</span><span class="n">q</span> <span class="o">-</span><span class="n">O</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">wait</span><span class="o">.</span><span class="n">sh</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gravitl</span><span class="o">/</span><span class="n">netmaker</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">wait</span><span class="o">.</span><span class="n">sh</span>
<span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">wait</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</section>
<section id="install-netmaker">
<h2>5. Install Netmaker<a class="headerlink" href="#install-netmaker" title="Permalink to this headline"></a></h2>
<section id="prepare-docker-compose">
<h3>Prepare Docker Compose<a class="headerlink" href="#prepare-docker-compose" title="Permalink to this headline"></a></h3>
<p>As of 0.20.0, our docker-compose and Caddyfile now contains references to a netmaker.env file. This will cut down on repetitive entries like inserting your base domain multiple times. You only insert it once in your netmaker.env file and the backend handles placing it in the right places. The EMQX and Pro docker-composes are now extensions of the regular docker-compose file, so switching to Pro or EMQX doesn’t involve recreating an entire docker-compose file.</p>
<p>Get the base docker-compose and Caddyfile.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gravitl</span><span class="o">/</span><span class="n">netmaker</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">compose</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span><span class="o">.</span><span class="n">yml</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gravitl</span><span class="o">/</span><span class="n">netmaker</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">Caddyfile</span>
</pre></div>
</div>
<p>If you plan on using a Professional server (Pro), then you will need to grab the Caddyfile-pro file instead. There will be more Pro related instructions below in “Extra Steps for Pro”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gravitl</span><span class="o">/</span><span class="n">netmaker</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">Caddyfile</span><span class="o">-</span><span class="n">pro</span>
</pre></div>
</div>
<p>You can grab the netmaker.env file here.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gravitl</span><span class="o">/</span><span class="n">netmaker</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">netmaker</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">env</span>
<span class="n">cp</span> <span class="n">netmaker</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">env</span> <span class="n">netmaker</span><span class="o">.</span><span class="n">env</span>
</pre></div>
</div>
<p>You can then use a text editor like vim or nano to go in there and fill out the fields. There is an example below to reference. You can get your ip with the command <code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">route</span> <span class="pre">get</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">sed</span> <span class="pre">-n</span> <span class="pre">'s/^.*src</span> <span class="pre">\([0-9.]*\)</span> <span class="pre">.*$/\1/p'</span></code>. You can also generate random strings for the master key and MQ passwords with the command <code class="docutils literal notranslate"><span class="pre">tr</span> <span class="pre">-dc</span> <span class="pre">A-Za-z0-9</span> <span class="pre">&lt;/dev/urandom</span> <span class="pre">|</span> <span class="pre">head</span> <span class="pre">-c</span> <span class="pre">30</span> <span class="pre">;</span> <span class="pre">echo</span> <span class="pre">''</span></code> or you can enter them manually if desired. For the base domain again, we advise you use your own domain, because nip.io can hit rate limiting easily from the high volume when obtaining certificates. If you do want to use nip.io, just enter <code class="docutils literal notranslate"><span class="pre">nm.&lt;YOUR_IP_WITH_DASHES_INSTEAD_OF_DOTS&gt;.nip.io</span></code>.</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1"># Email used for SSL certificates</span><span class="w"></span>
<span class="na">NM_EMAIL</span><span class="o">=</span><span class="s">example@email.com</span><span class="w"></span>
<span class="c1"># The base domain of netmaker</span><span class="w"></span>
<span class="na">NM_DOMAIN</span><span class="o">=</span><span class="s">nm.123-456-789-012.nip.io</span><span class="w"></span>
<span class="c1"># Public IP of machine</span><span class="w"></span>
<span class="na">SERVER_HOST</span><span class="o">=</span><span class="s">&lt;YOUR_IP_ADDRESS&gt;</span><span class="w"></span>
<span class="c1"># The admin master key for accessing the API. Change this in any production installation.</span><span class="w"></span>
<span class="na">MASTER_KEY</span><span class="o">=</span><span class="s">&lt;RANDOM_STRING&gt;</span><span class="w"></span>
<span class="c1"># The username to set for MQ access</span><span class="w"></span>
<span class="na">MQ_USERNAME</span><span class="o">=</span><span class="s">&lt;EXAMPLE_USERNAME&gt;</span><span class="w"></span>
<span class="c1"># The password to set for MQ access</span><span class="w"></span>
<span class="na">MQ_PASSWORD</span><span class="o">=</span><span class="s">&lt;EXAMPLE_PASSWORD&gt;</span><span class="w"></span>
<span class="c1"># Specify the type of server to install. Use pro for professional and ce for community edition</span><span class="w"></span>
<span class="na">INSTALL_TYPE</span><span class="o">=</span><span class="s">ce</span><span class="w"></span>
<span class="c1"># The next two are for Professional edition. You can find that info below on &quot;Extra steps for Pro&quot;</span><span class="w"></span>
<span class="na">NETMAKER_TENANT_ID</span><span class="o">=</span><span class="w"> </span><span class="s">(for Pro version)</span><span class="w"></span>
<span class="na">LICENSE_KEY</span><span class="o">=</span><span class="w"> </span><span class="s">(for Pro version)</span><span class="w"></span>
<span class="c1"># The version for the netmaker and netmaker-ui servers. current version is v0.20.2.</span><span class="w"></span>
<span class="c1"># Some versions of docker may try to include quotation marks in this reference, so don&#39;t put them in.</span><span class="w"></span>
<span class="na">SERVER_IMAGE_TAG</span><span class="o">=</span><span class="s">v0.20.2</span><span class="w"></span>
<span class="na">UI_IMAGE_TAG</span><span class="o">=</span><span class="s">v0.20.2</span><span class="w"></span>
<span class="c1"># used for HA - identifies this server vs other servers</span><span class="w"></span>
<span class="na">NODE_ID</span><span class="o">=</span><span class="s">&quot;netmaker-server-1&quot;</span><span class="w"></span>
<span class="na">METRICS_EXPORTER</span><span class="o">=</span><span class="s">&quot;off&quot; (turn on for Pro)</span><span class="w"></span>
<span class="na">PROMETHEUS</span><span class="o">=</span><span class="s">&quot;off&quot;  (turn on for Pro)</span><span class="w"></span>
<span class="c1"># Enables DNS Mode, meaning all nodes will set hosts file for private dns settings</span><span class="w"></span>
<span class="na">DNS_MODE</span><span class="o">=</span><span class="s">&quot;on&quot;</span><span class="w"></span>
<span class="c1"># Enable auto update of netclient ? ENUM:- enabled,disabled | default=enabled</span><span class="w"></span>
<span class="na">NETCLIENT_AUTO_UPDATE</span><span class="o">=</span><span class="s">&quot;enabled&quot;</span><span class="w"></span>
<span class="c1"># The HTTP API port for Netmaker. Used for API calls / communication from front end.</span><span class="w"></span>
<span class="c1"># If changed, need to change port of BACKEND_URL for netmaker-ui.</span><span class="w"></span>
<span class="na">API_PORT</span><span class="o">=</span><span class="s">&quot;8081&quot;</span><span class="w"></span>
<span class="na">EXPORTER_API_PORT</span><span class="o">=</span><span class="s">&quot;8085&quot;</span><span class="w"></span>
<span class="c1"># The &quot;allowed origin&quot; for API requests. Change to restrict where API requests can come from with comma-separated</span><span class="w"></span>
<span class="c1"># URLs. ex:- https://dashboard.netmaker.domain1.com,https://dashboard.netmaker.domain2.com</span><span class="w"></span>
<span class="na">CORS_ALLOWED_ORIGIN</span><span class="o">=</span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="c1"># Show keys permanently in UI (until deleted) as opposed to 1-time display.</span><span class="w"></span>
<span class="na">DISPLAY_KEYS</span><span class="o">=</span><span class="s">&quot;on&quot;</span><span class="w"></span>
<span class="c1"># Database to use - sqlite, postgres, or rqlite</span><span class="w"></span>
<span class="na">DATABASE</span><span class="o">=</span><span class="s">&quot;sqlite&quot;</span><span class="w"></span>
<span class="c1"># The address of the mq server. If running from docker compose it will be &quot;mq&quot;. Otherwise, need to input address.</span><span class="w"></span>
<span class="c1"># If using &quot;host networking&quot;, it will find and detect the IP of the mq container.</span><span class="w"></span>
<span class="na">SERVER_BROKER_ENDPOINT</span><span class="o">=</span><span class="s">&quot;ws://mq:1883&quot;</span><span class="w"></span>
<span class="c1"># The reachable port of STUN on the server</span><span class="w"></span>
<span class="na">STUN_PORT</span><span class="o">=</span><span class="s">&quot;3478&quot;</span><span class="w"></span>
<span class="c1"># Logging verbosity level - 1, 2, or 3</span><span class="w"></span>
<span class="na">VERBOSITY</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="w"></span>
<span class="c1"># If ON, all new clients will enable proxy by default</span><span class="w"></span>
<span class="c1"># If OFF, all new clients will disable proxy by default</span><span class="w"></span>
<span class="c1"># If AUTO, stick with the existing logic for NAT detection</span><span class="w"></span>
<span class="c1"># This setting is no longer available from v0.20.5</span><span class="w"></span>
<span class="na">DEFAULT_PROXY_MODE</span><span class="o">=</span><span class="s">&quot;off&quot;</span><span class="w"></span>
<span class="na">DEBUG_MODE</span><span class="o">=</span><span class="s">&quot;off&quot;</span><span class="w"></span>
<span class="c1"># Enables the REST backend (API running on API_PORT at SERVER_HTTP_HOST).</span><span class="w"></span>
<span class="c1"># Change to &quot;off&quot; to turn off.</span><span class="w"></span>
<span class="na">REST_BACKEND</span><span class="o">=</span><span class="s">&quot;on&quot;</span><span class="w"></span>
<span class="c1"># If turned &quot;on&quot;, Server will not set Host based on remote IP check.</span><span class="w"></span>
<span class="c1"># This is already overridden if SERVER_HOST is set. Turned &quot;off&quot; by default.</span><span class="w"></span>
<span class="na">DISABLE_REMOTE_IP_CHECK</span><span class="o">=</span><span class="s">&quot;off&quot;</span><span class="w"></span>
<span class="c1"># Whether or not to send telemetry data to help improve Netmaker. Switch to &quot;off&quot; to opt out of sending telemetry.</span><span class="w"></span>
<span class="na">TELEMETRY</span><span class="o">=</span><span class="s">&quot;on&quot;</span><span class="w"></span>
<span class="c1">###</span><span class="w"></span>
<span class="c1">#</span><span class="w"></span>
<span class="c1"># OAuth section</span><span class="w"></span>
<span class="c1">#</span><span class="w"></span>
<span class="c1">###</span><span class="w"></span>
<span class="c1"># &quot;&lt;azure-ad|github|google|oidc&gt;&quot;</span><span class="w"></span>
<span class="na">AUTH_PROVIDER</span><span class="o">=</span><span class="w"></span>
<span class="c1"># &quot;&lt;client id of your oauth provider&gt;&quot;</span><span class="w"></span>
<span class="na">CLIENT_ID</span><span class="o">=</span><span class="w"></span>
<span class="c1"># &quot;&lt;client secret of your oauth provider&gt;&quot;</span><span class="w"></span>
<span class="na">CLIENT_SECRET</span><span class="o">=</span><span class="w"></span>
<span class="c1"># &quot;https://dashboard.&lt;netmaker base domain&gt;&quot;</span><span class="w"></span>
<span class="na">FRONTEND_URL</span><span class="o">=</span><span class="w"></span>
<span class="c1"># &quot;&lt;only for azure, you may optionally specify the tenant for the OAuth&gt;&quot;</span><span class="w"></span>
<span class="na">AZURE_TENANT</span><span class="o">=</span><span class="w"></span>
<span class="c1"># https://oidc.yourprovider.com - URL of oidc provider</span><span class="w"></span>
<span class="na">OIDC_ISSUER</span><span class="o">=</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="extra-steps-for-pro">
<h3>Extra Steps for Pro<a class="headerlink" href="#extra-steps-for-pro" title="Permalink to this headline"></a></h3>
<ol class="arabic simple">
<li><p>Visit <a class="reference external" href="https://app.netmaker.io">https://app.netmaker.io</a> to create your account on the Netmaker SaaS platform.</p></li>
<li><p>Create a tenant of type <code class="docutils literal notranslate"><span class="pre">self-hosted</span></code> to obtain a license key. more details in <a class="reference internal" href="pro/pro-setup.html"><span class="doc">Netmaker Professional setup</span></a></p></li>
<li><p>Retrieve Tenant ID and license key from the tenant’s settings tab.</p></li>
<li><p>Place the licence key and tenant ID in the netmaker.env file.</p></li>
<li><p>In the netmaker.env file, change the METRICS_EXPORTER and PROMETHEUS from off to on.</p></li>
<li><p>Grab the docker-compose.pro extension file from the repo and change its name to docker-compose.override.yml.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gravitl</span><span class="o">/</span><span class="n">netmaker</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">compose</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span><span class="o">.</span><span class="n">pro</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>You will not need to make any changes to this file. It will reference the current netmaker.env file.</p>
<p>Then run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">fs</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">netmaker</span><span class="o">.</span><span class="n">env</span> <span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">env</span>
</pre></div>
</div>
</section>
<section id="integrating-oauth">
<h3>Integrating OAuth<a class="headerlink" href="#integrating-oauth" title="Permalink to this headline"></a></h3>
<p>Users are also allowed to join a Netmaker server via OAuth. They can do this by clicking the “Login with SSO” button on the dashboard’s login page. Check out the <a class="reference internal" href="oauth.html"><span class="doc">integrating oauth docs</span></a>.</p>
</section>
</section>
<section id="start-netmaker">
<h2>6. Start Netmaker<a class="headerlink" href="#start-netmaker" title="Permalink to this headline"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">docker-compose</span> <span class="pre">-f</span> <span class="pre">docker-compose.yml</span> <span class="pre">up</span> <span class="pre">-d</span> <span class="pre">--force-recreate</span></code></p>
<p>navigate to dashboard.&lt;your base domain&gt; to begin using Netmaker.</p>
<p>To troubleshoot issues, start with:</p>
<p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">netmaker</span></code></p>
<p>Or check out the <a class="reference internal" href="troubleshoot.html"><span class="doc">troubleshoooting docs</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="netclient.html" class="btn btn-neutral float-right" title="Netclient" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Netmaker Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>